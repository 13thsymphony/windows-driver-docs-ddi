---
UID: NS:fltkernel._FLT_CALLBACK_DATA
title: _FLT_CALLBACK_DATA
author: windows-driver-content
description: The FLT_CALLBACK_DATA structure represents an I/O operation. The Filter Manager and minifilters use this structure to initiate and process I/O operations.
old-location: ifsk\flt_callback_data.htm
old-project: ifsk
ms.assetid: c526585e-aa6d-4332-9dd7-927d83293f09
ms.author: windowsdriverdev
ms.date: 1/9/2018
ms.keywords: _FLT_CALLBACK_DATA, *PFLT_CALLBACK_DATA, FLT_CALLBACK_DATA
ms.prod: windows-hardware
ms.technology: windows-devices
ms.topic: struct
req.header: fltkernel.h
req.include-header: Fltkernel.h
req.target-type: Windows
req.target-min-winverclnt: 
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.alt-api: FLT_CALLBACK_DATA
req.alt-loc: fltkernel.h
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: 
req.dll: 
req.irql: PASSIVE_LEVEL
req.typenames: *PFLT_CALLBACK_DATA, FLT_CALLBACK_DATA
---

# _FLT_CALLBACK_DATA structure



## -description
The FLT_CALLBACK_DATA structure represents an I/O operation. The Filter Manager and minifilters use this structure to initiate and process I/O operations. 



## -syntax

````
typedef struct _FLT_CALLBACK_DATA {
  FLT_CALLBACK_DATA_FLAGS       Flags;
  const PETHREAD                Thread;
  const PFLT_IO_PARAMETER_BLOCK Iopb;
  IO_STATUS_BLOCK               IoStatus;
  struct _FLT_TAG_DATA_BUFFER  *TagData;
  union {
    struct {
      LIST_ENTRY QueueLinks;
      PVOID      QueueContext[2];
    };
    PVOID  FilterContext[4];
  };
  KPROCESSOR_MODE               RequestorMode;
} FLT_CALLBACK_DATA, *PFLT_CALLBACK_DATA;
````


## -struct-fields

### -field Flags

Bitmask of flags describing the I/O operation. 


<div class="alert"><b>Note</b>  Minifilters can set the following flag.</div>
<div> </div>


<table>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_DIRTY

</td>
<td>
A minifilter sets this flag (by calling <a href="..\fltkernel\nf-fltkernel-fltsetcallbackdatadirty.md">FltSetCallbackDataDirty</a>) to indicate that it has modified the contents of the callback data structure. (For more information, see the following Remarks section.) 

</td>
</tr>
</table>
 


<div class="alert"><b>Note</b>  Only the Filter Manager can set the following flags.</div>
<div> </div>


When the Filter Manager initializes the callback data structure, it sets one of the following flags to specify the type of I/O operation that the callback data structure represents. 

<table>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_FAST_IO_OPERATION

</td>
<td>
The callback data structure represents a fast I/O operation. 

</td>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_FS_FILTER_OPERATION

</td>
<td>
The callback data structure represents a file system minifilter callback operation. 

</td>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_IRP_OPERATION

</td>
<td>
The callback data structure represents an I/O request packet (IRP)-based operation. 

</td>
</tr>
</table>
 


<div class="alert"><b>Note</b>  Only the Filter Manager can set the following flags. </div>
<div> </div>


When the Filter Manager initializes the callback data structure, it can also set the following flags. 

<table>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_GENERATED_IO

</td>
<td>
The callback data structure represents an I/O operation that was generated by a minifilter. This flag is valid only for IRP-based operations. 

</td>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_REISSUED_IO

</td>
<td>
The callback data structure represents an I/O operation that is being reissued by a minifilter. (To reissue an I/O operation, a minifilter calls <a href="..\fltkernel\nf-fltkernel-fltreissuesynchronousio.md">FltReissueSynchronousIo</a>.) This flag is valid only for IRP-based operations. 

</td>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_SYSTEM_BUFFER

</td>
<td>
The buffer for the I/O operation was allocated from nonpaged pool. This flag can be set for any type of I/O operation. Minifilters must never set this flag. 

</td>
</tr>
</table>
 


<div class="alert"><b>Note</b>  Only the Filter Manager can set the following flags. </div>
<div> </div>


When the Filter Manager performs completion processing for the I/O operation that the callback data structure represents, it sets one or both of the following flags. 

<table>
<tr>
<th>Flag</th>
<th>Meaning</th>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_DRAINING_IO

</td>
<td>
The Filter Manager sets this flag to indicate that it is currently draining the completion node for the I/O operation. This flag is valid only during I/O completion. 

</td>
</tr>
<tr>
<td>
FLTFL_CALLBACK_DATA_POST_OPERATION

</td>
<td>
The Filter Manager sets this flag to indicate that it is currently calling registered postoperation callback (<a href="..\fltkernel\nc-fltkernel-pflt_post_operation_callback.md">PFLT_POST_OPERATION_CALLBACK</a>) routines for the operation. This flag is valid only during I/O completion. 

</td>
</tr>
</table>
 


### -field Thread

Pointer to the thread that initiated the I/O operation. 


### -field Iopb

Pointer to an <a href="..\fltkernel\ns-fltkernel-_flt_io_parameter_block.md">FLT_IO_PARAMETER_BLOCK</a> structure that contains the parameters for the I/O operation. 


### -field IoStatus

An <a href="..\wdm\ns-wdm-_io_status_block.md">IO_STATUS_BLOCK</a> structure that contains status and information for the I/O operation. A minifilter can modify the contents of this structure only in a preoperation callback (<a href="..\fltkernel\nc-fltkernel-pflt_pre_operation_callback.md">PFLT_PRE_OPERATION_CALLBACK</a>) routine from which it is about to return FLT_PREOP_COMPLETE or in a postoperation callback (<a href="..\fltkernel\nc-fltkernel-pflt_post_operation_callback.md">PFLT_POST_OPERATION_CALLBACK</a>) routine from which it is about to return FLT_POSTOP_FINISHED_PROCESSING. Otherwise, the contents of this structure are normally set by the Filter Manager. 


### -field TagData

Pointer to an <a href="..\fltkernel\ns-fltkernel-_flt_tag_data_buffer.md">FLT_TAG_DATA_BUFFER</a> structure that contains reparse point data for the I/O operation. This pointer is valid only in the post-create path. Thus only a minifilter's postoperation callback routine can change the value of this member. A minifilter's post-create callback routine can change this member to point to a different FLT_TAG_DATA_BUFFER structure. However, if it changes the member to point to a different structure, it must first free the existing structure to prevent a pool memory leak. 


### -field QueueLinks

Queue links that a minifilter can use when the Filter Manager's callback data queue is used to pend the I/O operation. 


### -field QueueContext

Array of context information pointers that a minifilter can use when the Filter Manager's queue is used to pend the I/O operation. 


### -field FilterContext

Array of context information pointers that a minifilter can use when a queue other than the Filter Manager's queue is used to pend the I/O operation. 


### -field RequestorMode

Indicates the execution mode of the process that initiated the I/O operation, either <b>KernelMode</b> or <b>UserMode</b>. 


## -remarks
A minifilter registers preoperation (<a href="..\fltkernel\nc-fltkernel-pflt_pre_operation_callback.md">PFLT_PRE_OPERATION_CALLBACK</a>) and postoperation (<a href="..\fltkernel\nc-fltkernel-pflt_post_operation_callback.md">PFLT_POST_OPERATION_CALLBACK</a>) callback routines for one or more types of I/O operations. When the Filter Manager calls one of these callback routines, it passes a callback data (FLT_CALLBACK_DATA) structure as the first parameter. This structure represents the I/O operation. 

A minifilter's preoperation or postoperation callback routine can modify the contents of the callback data structure, except for the <b>Thread</b> and <b>RequestorMode</b> members. If it does, it must then call <a href="..\fltkernel\nf-fltkernel-fltsetcallbackdatadirty.md">FltSetCallbackDataDirty</a>, unless it has also modified the contents of the <b>IoStatus</b> member. Otherwise, the modified values are ignored. 

A minifilter can initiate an I/O operation by calling a support routine such as <a href="..\fltkernel\nf-fltkernel-fltreadfile.md">FltReadFile</a> or by calling <a href="..\fltkernel\nf-fltkernel-fltallocatecallbackdata.md">FltAllocateCallbackData</a> to allocate a callback data structure; initializing the structure's I/O parameters, and passing the structure to <a href="..\fltkernel\nf-fltkernel-fltperformsynchronousio.md">FltPerformSynchronousIo</a> or <a href="..\fltkernel\nf-fltkernel-fltperformasynchronousio.md">FltPerformAsynchronousIo</a>. 

A minifilter-initiated I/O operation is sent only to the minifilter instances attached below the calling instance, and to the file system. Minifilters attached above the specified instance do not receive the I/O operation.  

Minifilters can only initiate IRP-based I/O operations. They cannot initiate fast I/O or file system filter (FSFilter) callback operations. 


## -see-also
<dl>
<dt>
<a href="..\fltkernel\ns-fltkernel-_flt_io_parameter_block.md">FLT_IO_PARAMETER_BLOCK</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff544645">FLT_IS_FASTIO_OPERATION</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff544648">FLT_IS_FS_FILTER_OPERATION</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff544654">FLT_IS_IRP_OPERATION</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff544660">FLT_IS_REISSUED_IO</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff544663">FLT_IS_SYSTEM_BUFFER</a>
</dt>
<dt>
<a href="..\fltkernel\ns-fltkernel-_flt_registration.md">FLT_REGISTRATION</a>
</dt>
<dt>
<a href="..\fltkernel\ns-fltkernel-_flt_related_objects.md">FLT_RELATED_OBJECTS</a>
</dt>
<dt>
<a href="..\fltkernel\ns-fltkernel-_flt_tag_data_buffer.md">FLT_TAG_DATA_BUFFER</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltallocatecallbackdata.md">FltAllocateCallbackData</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltfreecallbackdata.md">FltFreeCallbackData</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltperformasynchronousio.md">FltPerformAsynchronousIo</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltperformsynchronousio.md">FltPerformSynchronousIo</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltreadfile.md">FltReadFile</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltreissuesynchronousio.md">FltReissueSynchronousIo</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltreusecallbackdata.md">FltReuseCallbackData</a>
</dt>
<dt>
<a href="..\fltkernel\nf-fltkernel-fltsetcallbackdatadirty.md">FltSetCallbackDataDirty</a>
</dt>
<dt>
<a href="..\wdm\ns-wdm-_io_stack_location.md">IO_STACK_LOCATION</a>
</dt>
<dt>
<a href="..\wdm\ns-wdm-_io_status_block.md">IO_STATUS_BLOCK</a>
</dt>
<dt>
<a href="..\wdm\ns-wdm-_irp.md">IRP</a>
</dt>
<dt>
<a href="..\fltkernel\nc-fltkernel-pflt_post_operation_callback.md">PFLT_POST_OPERATION_CALLBACK</a>
</dt>
<dt>
<a href="..\fltkernel\nc-fltkernel-pflt_pre_operation_callback.md">PFLT_PRE_OPERATION_CALLBACK</a>
</dt>
</dl>
 

 

<a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [ifsk\ifsk]:%20FLT_CALLBACK_DATA structure%20 RELEASE:%20(1/9/2018)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a>

