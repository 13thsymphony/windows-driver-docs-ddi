---
UID: NF.rxprocs.RxIndicateChangeOfBufferingStateForSrvOpen
title: RxIndicateChangeOfBufferingStateForSrvOpen
author: windows-driver-content
description: RxIndicateChangeOfBufferingStateForSrvOpen is called to register a change buffering state request (an oplock break indication, for example) for later processing. If the necessary preconditions are satisfied, the oplock is processed further.
old-location: ifsk\rxindicatechangeofbufferingstateforsrvopen.htm
old-project: ifsk
ms.assetid: 70efd8d7-c275-440e-a4df-f41b799a63f0
ms.author: windowsdriverdev
ms.date: 11/14/2017
ms.keywords: RxIndicateChangeOfBufferingStateForSrvOpen
ms.prod: windows-hardware
ms.technology: windows-devices
ms.topic: function
req.header: rxprocs.h
req.include-header: Rxprocs.h, Struchdr.h, Fcb.h
req.target-type: Desktop
req.target-min-winverclnt: 
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.alt-api: RxIndicateChangeOfBufferingStateForSrvOpen
req.alt-loc: rxprocs.h
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
req.lib: 
req.dll: 
req.irql: <= APC_LEVEL
req.iface: 
req.product: Windows 10 or later.
---

# RxIndicateChangeOfBufferingStateForSrvOpen function



## -description
<p><b>RxIndicateChangeOfBufferingStateForSrvOpen</b> is called to register a change buffering state request (an oplock break indication, for example) for later processing. If the necessary preconditions are satisfied, the oplock is processed further. </p>


## -syntax

````
VOID RxIndicateChangeOfBufferingStateForSrvOpen(
   PMRX_SRV_CALL SrvCall,
   PMRX_SRV_OPEN SrvOpen,
   PVOID         SrvOpenKey,
   PVOID         MRxContext
);
````


## -parameters
<dl>

### -param <i>SrvCall</i> 

<dd>
<p>A pointer to the SRV_CALL structure.</p>
</dd>

### -param <i>SrvOpen</i> 

<dd>
<p>A pointer to the SRV_OPEN structure.</p>
</dd>

### -param <i>SrvOpenKey</i> 

<dd>
<p>A pointer to the key for the SRV_OPEN key structure.</p>
</dd>

### -param <i>MRxContext</i> 

<dd>
<p>A pointer to the context to be passed back to the network mini-redirector during callbacks for processing the request.</p>
</dd>
</dl>

## -returns
<p>None</p>

## -remarks
<p>This routine registers the change buffering state request by either inserting it in the registration list (DPC Level processing ) or the appropriate dispatcher/handler list.</p>

<p>This is an instance where in the buffering state change indications from the server use the key generated by the client (the SRV_OPEN address in itself is the best key that can be used). This implies that no further lookup is required.</p>

<p>However if this routine is called at DPC level, the indication is processed as if the lookup needs to be done.</p>

<p>If the resource for the FCB has already been acquired by this thread, the buffering state change indication is processed immediately without further delay. <b>RxIndicateChangeOfBufferingStateForSrvOpen</b> calls <b>RxChangeBufferingState</b> immediately in this case.</p>

<p>The internal routines called by this routine can fail because of a lack of available memory (unable to allocate non-paged pool memory, for example), but since this is a VOID routine no error is returned when this condition occurs.</p>

<p>If a buffering state request can be processed immediately instead of being queued for processing later, then <b>RxChangeBufferingState</b> can be called. </p>

<p>This routine registers the change buffering state request by either inserting it in the registration list (DPC Level processing ) or the appropriate dispatcher/handler list.</p>

<p>This is an instance where in the buffering state change indications from the server use the key generated by the client (the SRV_OPEN address in itself is the best key that can be used). This implies that no further lookup is required.</p>

<p>However if this routine is called at DPC level, the indication is processed as if the lookup needs to be done.</p>

<p>If the resource for the FCB has already been acquired by this thread, the buffering state change indication is processed immediately without further delay. <b>RxIndicateChangeOfBufferingStateForSrvOpen</b> calls <b>RxChangeBufferingState</b> immediately in this case.</p>

<p>The internal routines called by this routine can fail because of a lack of available memory (unable to allocate non-paged pool memory, for example), but since this is a VOID routine no error is returned when this condition occurs.</p>

<p>If a buffering state request can be processed immediately instead of being queued for processing later, then <b>RxChangeBufferingState</b> can be called. </p>

## -requirements
<table>
<tr>
<th width="30%">
<p>Target platform</p>
</th>
<td width="70%">
<dl>
<dt>Desktop</dt>
</dl>
</td>
</tr>
<tr>
<th width="30%">
<p>Header</p>
</th>
<td width="70%">
<dl>
<dt>Rxprocs.h (include Rxprocs.h, Struchdr.h, or Fcb.h)</dt>
</dl>
</td>
</tr>
<tr>
<th width="30%">
<p>IRQL</p>
</th>
<td width="70%">
<p>&lt;= APC_LEVEL</p>
</td>
</tr>
</table>

## -see-also
<dl>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff554335">RxChangeBufferingState</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff554485">RxIndicateChangeOfBufferingState</a>
</dt>
<dt>
<a href="https://msdn.microsoft.com/library/windows/hardware/ff554751">RX_CONTEXT</a>
</dt>
</dl>
<p> </p>
<p> </p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback [ifsk\ifsk]:%20RxIndicateChangeOfBufferingStateForSrvOpen function%20 RELEASE:%20(11/14/2017)&amp;body=%0A%0APRIVACY STATEMENT%0A%0AWe use your feedback to improve the documentation. We don't use your email address for any other purpose, and we'll remove your email address from our system after the issue that you're reporting is fixed. While we're working to fix this issue, we might send you an email message to ask for more info. Later, we might also send you an email message to let you know that we've addressed your feedback.%0A%0AFor more info about Microsoft's privacy policy, see http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p>
